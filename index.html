<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IPFS File Download</title>
  </head>
  <body>
    <h1>IPFS File Download</h1>
    <input type="text" id="cidInput" placeholder="Enter CID">
<input type="text" id="filenameInput" placeholder="Enter custom filename (optional)">
<button id="downloadButton">Download File</button>

    <script>
    async function downloadFile(cid, customFilename) {
    try {
        const response = await fetch(`http://localhost:7000/v1/file?cid=${cid}`);
        if (!response.ok) {
            throw new Error('Download failed');
        }
        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.style.display = 'none';
        a.href = url;
        a.download = customFilename || cid;
        document.body.appendChild(a);
        a.click();
        window.URL.revokeObjectURL(url);
    } catch (error) {
        console.error('Error downloading file:', error);
    }
}

const cidInput = document.getElementById('cidInput');
const filenameInput = document.getElementById('filenameInput');
const downloadButton = document.getElementById('downloadButton');

downloadButton.addEventListener('click', () => {
    const cid = cidInput.value.trim();
    const customFilename = filenameInput.value.trim();
    if (cid) {
        downloadFile(cid, customFilename);
    }
});

    </script>
  </body>
</html>
